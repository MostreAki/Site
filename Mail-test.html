<!doctype html>
<meta charset="utf-8">
<title>Trigger Email – Teste</title>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

  // Use as mesmas credenciais do seu projeto
  const firebaseConfig = {
    apiKey: "AIzaSyBrKUtwP4T77oXE22cjOFVhfEUiJ7yctIE",
    authDomain: "mostreaki-2025.firebaseapp.com",
    projectId: "mostreaki-2025",
    storageBucket: "mostreaki-2025.firebasestorage.app",
    messagingSenderId: "748712068097",
    appId: "1:748712068097:web:09cf043fbb45917ef6ec00"
  };

  const app = initializeApp(firebaseConfig);
  const db  = getFirestore(app);

  addDoc(collection(db, "mail"), {
    to: ["mostreaki@mostreaki.com.br"],
    message: {
      subject: "Teste Trigger Email MostreAki",
      text: "Se você recebeu isto, a extensão está funcionando!"
      // se preferir, pode usar html: "<b>Funcionou!</b>"
    }
  }).then(() => {
    document.body.textContent = "Documento criado em /mail. Confira sua caixa de entrada em 10–40s.";
  }).catch(err => {
    document.body.textContent = "Falhou ao criar o doc: " + err.message;
    console.error(err);
  });
</script>
