<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste Grátis – MostreAki</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif}

    :root{
      --brand:#15b0af;
      --brandLight:#c2e7df;
      --accent:#FA1E39;
      --ink:#063b39;
      --card:#ffffff;
      --titleAccent:#c6f2e0;
    }

    body{
      background-image:url("fundo-mobile-escuro-mostreaki.png");
      background-size:cover;background-repeat:no-repeat;background-attachment:fixed;
      color:#222;
    }
    @media (min-width:768px){
      body{ background-image:url("fundo-desktop.png"); }
    }

    header{
      background:#c2e7df;height:60px;display:flex;align-items:center;justify-content:space-between;
      padding:0 20px;position:relative;box-shadow:0 2px 6px rgba(0,0,0,.1);
    }
    .logo-container{display:flex;align-items:center;cursor:pointer}
    .logo-container img{height:40px;margin-right:10px}
    .logo{font-size:1.5rem;font-weight:bold}
    .logo .mostre{color:#00C2BF}.logo .aki{color:#FA1E39}

    .header-auth{display:flex;align-items:center;gap:10px}
    .user-circle{
      background:#15b0af;color:#fff;font-weight:bold;border-radius:50%;
      width:32px;height:32px;display:flex;align-items:center;justify-content:center;
      overflow:hidden;font-size:.9rem;
    }
    .user-circle img{width:100%;height:100%;object-fit:cover;display:block}
    .menu-icon{
      width:32px;height:32px;display:flex;align-items:center;justify-content:center;
      line-height:1;font-size:1.5rem;cursor:pointer
    }
    .menu-list{
      position:absolute;top:60px;right:20px;background:#16807C;border:2px solid #000;
      border-radius:6px;display:none;flex-direction:column;padding:10px;z-index:10000;
    }
    .menu-list a{
      background:#FA1E39;color:#fff;text-decoration:none;padding:10px;margin-bottom:8px;
      border-radius:6px;text-align:center;font-weight:bold;
    }
    .menu-list a:hover{background:#b8313b}

    main{
      max-width:600px;margin:40px auto;padding:20px;background:#fff;border-radius:14px;
      box-shadow:0 6px 20px rgba(0,0,0,.1);
    }
    h1{
      color:var(--titleAccent);font-size:1.9rem;text-align:center;margin-bottom:20px;
      text-shadow:0 1px 0 rgba(0,0,0,.2), 0 2px 4px rgba(0,0,0,.25);
    }
    p.lead{
      color:#234;font-size:1.05rem;text-align:center;margin-bottom:20px;
    }
    label{
      display:block;margin:10px 0 6px;color:#333;font-weight:bold;
    }
    input{
      width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:1rem;
    }
    input:focus{outline:2px solid var(--brand)}
    button.primary{
      background:var(--brand);color:#fff;border:0;border-radius:10px;padding:12px;
      font-weight:bold;cursor:pointer;width:100%;font-size:1.05rem;margin-top:20px;
    }
    button.primary:hover{filter:brightness(.95)}
    .note{
      margin:12px 0;padding:12px 14px;background:#f3fbfa;border-left:4px solid var(--brand);
      border-radius:10px;color:#234;font-size:.95rem;
    }
    .error{
      color:#FA1E39;font-size:.9rem;margin-top:4px;display:none;
    }
    footer{
      background:#c2e7df;padding:20px;text-align:center;color:#555;font-size:.9rem;margin-top:40px;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-container" onclick="location.href='index.html'">
      <img src="logomarca-mostreaki.svg" alt="Logo">
      <div class="logo"><span class="mostre">Mostre</span><span class="aki">Aki</span></div>
    </div>
    <div class="header-auth">
      <span id="authText" style="font-weight:bold;color:#15b0af;cursor:pointer;display:none">Entrar</span>
      <div id="userCircle" class="user-circle" title="Perfil">F</div>
      <div id="menuBtn" class="menu-icon" aria-controls="menu" aria-expanded="false">☰</div>
    </div>
    <nav class="menu-list" id="menu">
      <a href="/index.html">Página Inicial</a>
      <a href="/sobre.html">Sobre</a>
      <a href="/minha-conta.html">Minha Conta</a>
      <a href="/parceiros.html">Parceiros</a>
      <a href="/servicos-adicionais.html">Serviços Adicionais</a>
      <a href="/redes-sociais.html">Redes Sociais</a>
      <a href="/contatos.html">Contatos</a>
    </nav>
  </header>

  <main>
    <h1>Teste o MostreAki Grátis por 7 Dias!</h1>
    <p class="lead">Crie seu site em minutos e experimente o MostreAki sem compromisso!</p>
    <form id="trialForm">
      <label for="nome">Nome</label>
      <input id="nome" type="text" required placeholder="Seu nome completo">
      <div id="nomeError" class="error">Por favor, digite seu nome.</div>

      <label for="email">E-mail</label>
      <input id="email" type="email" required placeholder="voce@exemplo.com"
             pattern="^[^\s@]+@[^\s@]+\.[^\s@]{2,}$">
      <div id="emailError" class="error">Por favor, digite um e-mail válido.</div>

      <label for="subdominio">Subdomínio (ex.: seu-nome.mostreaki.com.br)</label>
      <input id="subdominio" type="text" required placeholder="seu-nome"
             pattern="[a-z0-9-]{3,30}">
      <div id="subdominioError" class="error">Use apenas letras minúsculas, números e hífens (3-30 caracteres).</div>

      <div class="note">
        <b>Nota:</b> Seu site será criado em até 24h e estará ativo por 7 dias. Após isso, escolha um plano pago ou o site será desativado.
      </div>

      <button type="submit" class="primary">Começar Teste Grátis</button>
    </form>
  </main>

  <footer>&copy; 2025 MostreAki. Todos os direitos reservados.</footer>

  <script type="module">
    import { initializeApp, getApps, getApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
    import { getFirestore, doc, setDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';
    import { getStorage, ref, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js';

    const cfg = {
      apiKey: 'AIzaSyBrKUtwP4T77oXE22cjOFVhfEUiJ7yctIE',
      authDomain: 'mostreaki-2025.firebaseapp.com',
      projectId: 'mostreaki-2025',
      storageBucket: 'mostreaki-2025.firebasestorage.app',
      messagingSenderId: '748712068097',
      appId: '1:748712068097:web:09cf043fbb45917ef6ec00'
    };
    const app = getApps().length ? getApp() : initializeApp(cfg);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const stg = getStorage(app, 'gs://mostreaki-2025.firebasestorage.app');

    const $ = s => document.querySelector(s);
    const $$ = s => document.querySelectorAll(s);
    const toast = (m) => {
      const t = document.createElement('div');
      t.textContent = m;
      t.style.position = 'fixed';
      t.style.top = '16px';
      t.style.right = '16px';
      t.style.background = '#FA1E39';
      t.style.color = '#fff';
      t.style.padding = '12px 14px';
      t.style.borderRadius = '10px';
      t.style.boxShadow = '0 6px 18px rgba(0,0,0,.2)';
      t.style.zIndex = '99999';
      t.style.fontWeight = 'bold';
      document.body.append(t);
      setTimeout(() => t.remove(), 2400);
    };

    /* Auth header */
    (function wireAuthUI() {
      const at = $('#authText');
      onAuthStateChanged(auth, user => {
        if (user) {
          if (at) {
            at.textContent = 'Sair';
            at.style.display = 'inline';
            at.onclick = async () => {
              await auth.signOut();
              localStorage.removeItem('fotoPerfil');
              location = '/index.html';
            };
          }
        } else {
          if (at) {
            at.textContent = 'Entrar';
            at.style.display = 'inline';
            at.onclick = () => location.href = '/planos.html';
          }
        }
      });
    })();

    /* Menu */
    (function wireMenu() {
      const btn = $('#menuBtn');
      const menu = $('#menu');
      if (!btn || !menu) return;
      const open = () => {
        menu.style.display = 'flex';
        btn.setAttribute('aria-expanded', 'true');
        document.addEventListener('click', onDoc, true);
        document.addEventListener('keydown', onKey);
      };
      const close = () => {
        menu.style.display = 'none';
        btn.setAttribute('aria-expanded', 'false');
        document.removeEventListener('click', onDoc, true);
        document.removeEventListener('keydown', onKey);
      };
      const toggle = () => menu.style.display === 'flex' ? close() : open();
      function onDoc(e) {
        if (!menu.contains(e.target) && e.target !== btn) close();
      }
      function onKey(e) {
        if (e.key === 'Escape') close();
      }
      btn.addEventListener('click', e => {
        e.stopPropagation();
        toggle();
      });
    })();

    /* Formulário */
    const form = $('#trialForm');
    const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;
    const subdominioRe = /^[a-z0-9-]{3,30}$/;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const nome = $('#nome').value.trim();
      const email = $('#email').value.trim();
      const subdominio = $('#subdominio').value.trim();

      // Validação
      let valid = true;
      $('#nomeError').style.display = nome ? 'none' : 'block';
      $('#emailError').style.display = emailRe.test(email) ? 'none' : 'block';
      $('#subdominioError').style.display = subdominioRe.test(subdominio) ? 'none' : 'block';
      if (!nome || !emailRe.test(email) || !subdominioRe.test(subdominio)) {
        valid = false;
      }

      if (!valid) return;

      try {
        await setDoc(doc(db, 'trials', email), {
          plano: 'trial',
          nome,
          email,
          subdominio,
          createdAt: serverTimestamp(),
          expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
          status: 'ativo',
          provider: 'mostreaki',
          updatedAt: serverTimestamp()
        });
        toast('Trial criado! Seu site ' + subdominio + '.mostreaki.com.br será ativado em até 24h.');
        setTimeout(() => location.href = '/obrigado.html', 2500);
      } catch (e) {
        toast('Erro ao criar Trial: ' + e.message);
      }
    });
  </script>
</body>
</html>